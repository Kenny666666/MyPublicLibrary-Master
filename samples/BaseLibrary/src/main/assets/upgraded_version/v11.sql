ALTER TABLE SP_PD_PP_INFO ADD BD_SCAN_MODE NUMBER(1);
ALTER TABLE SP_PD_PP_P_LINE ADD BD_SCAN_MODE NUMBER(1);
ALTER TABLE SP_PD_PP_P_AREA ADD TWO_DIMENSION_CODE VARCHAR(100);
ALTER TABLE SP_PD_REL_ITEM_FUNCTION ADD PRECISION NUMBER(2);
ALTER TABLE SP_PD_TF_RECORD_ATTACH ADD PRECISION NUMBER(2);
ALTER TABLE SP_PD_TF_RECORD_ATTACH ADD SHOW_TEXT VARCHAR(1000);
ALTER TABLE SP_PD_TF_RECORD_ATTACH ADD FORMULA VARCHAR(1000);
CREATE TABLE SP_PD_PP_P_OBJECT_TWODIMCODE(  ID      VARCHAR(32) NOT NULL,  OBJECT_TYPE     NUMBER(2),  OBJECT_ID       VARCHAR(50),  TWO_DIMENSION_CODE      VARCHAR(200),  CREATOR_DATE    VARCHAR(20),  OPTIMISTIC_LOCK_VERSION NUMBER(12),  UPDATE_TIME     VARCHAR(20),  DATA_FROM       VARCHAR(80),  BUREAU_CODE     VARCHAR(4),  PROVINCE_CODE   VARCHAR(2),  PRIMARY KEY (ID ASC));
CREATE TABLE SP_PD_PP_P_AREA_TWODIMCODE_UD(  ID      VARCHAR(50) NOT NULL,  PROD_PLAN_ID    VARCHAR(32),  PATROL_LINE_ID  VARCHAR(32),  PATROL_AREA_ID  VARCHAR(32),  OLD_TWO_DIMENSION_CODE  VARCHAR(200),  NEW_TWO_DIMENSION_CODE  VARCHAR(200),  UPDATE_STATE    NUMBER(1),  OPTIMISTIC_LOCK_VERSION NUMBER(12),  UPDATE_TIME     VARCHAR(20),  DATA_FROM       VARCHAR(80),  BUREAU_CODE     VARCHAR(4),  PROVINCE_CODE   VARCHAR(2),  PRIMARY KEY (ID ASC));
CREATE TABLE SP_PD_PP_P_DEV_TWODIMCODE_UD(  ID      VARCHAR(50) NOT NULL,  PROD_PLAN_ID    VARCHAR(32),  PATROL_LINE_ID  VARCHAR(32),  PATROL_AREA_ID  VARCHAR(32),  PATROL_DEVICE_ID VARCHAR(32),  DEVICE_ID       VARCHAR(50),  DEVICE_NAME     VARCHAR(260),  OLD_TWO_DIMENSION_CODE  VARCHAR(200),  NEW_TWO_DIMENSION_CODE  VARCHAR(200),  UPDATE_STATE    NUMBER(1),  OPTIMISTIC_LOCK_VERSION NUMBER(12),  UPDATE_TIME     VARCHAR(20),  DATA_FROM       VARCHAR(80),  BUREAU_CODE     VARCHAR(4),  PROVINCE_CODE   VARCHAR(2),  PRIMARY KEY (ID ASC));
CREATE TABLE SP_PD_PP_P_FL_TWODIMCODE_UD(  ID      VARCHAR(50) NOT NULL,  PROD_PLAN_ID    VARCHAR(32),  PATROL_LINE_ID  VARCHAR(32),  PP_PATROL_OBJECT_RE_ID  VARCHAR(32),  FUNCTION_LOCATION_ID    VARCHAR(50),  FUNCTION_LOCATION_NAME  VARCHAR(1000),  OLD_TWO_DIMENSION_CODE  VARCHAR(200),  NEW_TWO_DIMENSION_CODE  VARCHAR(200),  CONFIRM_TIME    VARCHAR(20),  UPDATE_STATE    NUMBER(10),  OPTIMISTIC_LOCK_VERSION NUMBER(12),  UPDATE_TIME     VARCHAR(20),  DATA_FROM       VARCHAR(80),  BUREAU_CODE     VARCHAR(4),  PROVINCE_CODE   VARCHAR(2),  PRIMARY KEY (ID ASC));
UPDATE SP_PD_TF_RECORD SET DEVICE_ID = null, WORK_OBJECT_ID = null WHERE EXISTS (SELECT T3.ID FROM (SELECT T1.ID FROM (SELECT F1.ID, F1.TABLE_ID FROM SP_PD_REL_INS_ITEM_FUNCTION F1  UNION SELECT F2.ID,F2.TABLE_ID FROM SP_PD_REL_ITEM_FUNCTION F2) T1,(SELECT T.ID FROM SP_PD_TF_TABLE T, SP_PD_TF_PROJECT P WHERE T.PROJECT_ID = P.ID AND T.NEED_CLASSIFY = 1 AND P.NEED_LOOP = 2) T2 WHERE T1.TABLE_ID = T2.ID) T3 WHERE ITEM_FUNCTION_ID = T3.ID) AND RESULT_TYPE = 1 AND DEVICE_ID IS NOT NULL;